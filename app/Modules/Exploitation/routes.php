<?php

use Illuminate\Support\Facades\Route;
use App\Modules\Exploitation\Controller\ExploitationController;
use App\Http\Middleware\AdminMiddleware;
use App\Http\Middleware\SessionTimeout;

Route::middleware([AdminMiddleware::class, SessionTimeout::class])->group(function () {
    Route::get('/sub_page', [ExploitationController::class, 'sub_page']);
    Route::get('/like_page', [ExploitationController::class, 'like_page']);
    Route::get('/share_page', [ExploitationController::class, 'share_page']);
});

Route::middleware([SessionTimeout::class])->group(function () {
    Route::get('/subpages', [ExploitationController::class, 'getAllSubpages']);
    Route::post('/subpages', [ExploitationController::class, 'createSubpage']);
    Route::put('/subpages/{id}', [ExploitationController::class, 'updateSubpage']);
    Route::delete('/subpages/{id}', [ExploitationController::class, 'deleteSubpage']);
    Route::get('/subpages/{id}', [ExploitationController::class, 'getSubpageById']);

    Route::get('/likes', [ExploitationController::class, 'getAllLikes']);
    Route::post('/likes', [ExploitationController::class, 'createLike']);
    Route::put('/likes/{id}', [ExploitationController::class, 'updateLike']);
    Route::delete('/likes/{id}', [ExploitationController::class, 'deleteLike']);
    Route::get('/likes/{id}', [ExploitationController::class, 'getLikeById']);

    Route::get('/shares', [ExploitationController::class, 'getAllShares']);
    Route::post('/shares', [ExploitationController::class, 'createShare']);
    Route::put('/shares/{id}', [ExploitationController::class, 'updateShare']);
    Route::delete('/shares/{id}', [ExploitationController::class, 'deleteShare']);
    Route::get('/shares/{id}', [ExploitationController::class, 'getShareById']);
});
